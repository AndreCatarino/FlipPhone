name: CI

on: [push, pull_request]

jobs:
  
  SpringBoot:
    name: SpringBoot
    runs-on: ubuntu-18.04
    defaults:
      run:
        working-directory: flipPhone
    
    
    steps:
      - name: Setup MySQL
        uses: samin/mysql-action@v1
        with:
          host port: 3800 # Optional, default value is 3306. The port of host
          container port: 3307 # Optional, default value is 3306. The port of container
          character set server: 'utf8' # Optional, default value is 'utf8mb4'. The '--character-set-server' option for mysqld
          collation server: 'utf8_general_ci' # Optional, default value is 'utf8mb4_general_ci'. The '--collation-server' option for mysqld
          mysql version: '8.0' # Optional, default value is "latest". The version of the MySQL
          mysql database: 'db_example' # Optional, default value is "test". The specified database which will be create
          mysql user: 'springuser' # Required if "mysql root password" is empty, default is empty. The superuser for the specified database. Of course you can use secrets, too
          mysql password: 'ThePassword' # Required if "mysql user" exists. The password for the "mysql user"
      - uses: actions/checkout@v1  
      - name: Setup java
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
      - name: Set up Maven
        uses: stCarolas/setup-maven@v3
        with:
          maven-version: 3.5.4
      - name: run testes SpringBoot 
        run: mvn test
      - name: run SpringBoot
        run: mvn spring-boot:run
